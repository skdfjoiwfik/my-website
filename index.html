<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rider Salary Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h2 {
            color: #4a5568;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #4a5568;
        }

        input, select, button {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e0;
            border-radius: 5px;
            font-size: 1rem;
        }

        button {
            background: #4c51bf;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        button:hover {
            background: #434190;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: #edf2f7;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4c51bf;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #718096;
        }

        .history-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-top: 20px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: #f7fafc;
            font-weight: 600;
            color: #4a5568;
        }

        tr:hover {
            background: #f7fafc;
        }

        .summary-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-top: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .summary-row:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 1.2rem;
            color: #2d3748;
        }

        .rider-type-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .inside-rider {
            background: #c6f6d5;
            color: #22543d;
        }

        .outside-rider {
            background: #fed7d7;
            color: #742a2a;
        }

        .alert {
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: 600;
        }

        .alert-success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }

        .alert-error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #feb2b2;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .card-container {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Rider Salary Management System</h1>
            <p class="subtitle">Manage inside and outside rider salaries with daily work tracking</p>
        </header>

        <div class="card-container">
            <div class="card">
                <h2>Add New Rider</h2>
                <div class="form-group">
                    <label for="riderId">Rider ID</label>
                    <input type="text" id="riderId" placeholder="Enter unique rider ID">
                </div>
                <div class="form-group">
                    <label for="riderName">Rider Name</label>
                    <input type="text" id="riderName" placeholder="Enter rider name">
                </div>
                <div class="form-group">
                    <label for="riderType">Rider Type</label>
                    <select id="riderType">
                        <option value="inside">Inside Rider (3000৳ basic + 23৳/delivery)</option>
                        <option value="outside">Outside Rider (5000৳ basic + 30৳/delivery)</option>
                    </select>
                </div>
                <button id="addRiderBtn">Add Rider</button>
            </div>

            <div class="card">
                <h2>Record Daily Work</h2>
                <div class="form-group">
                    <label for="workRiderId">Rider ID</label>
                    <input type="text" id="workRiderId" placeholder="Enter rider ID">
                </div>
                <div class="form-group">
                    <label for="workDate">Date</label>
                    <input type="date" id="workDate">
                </div>
                <div class="form-group">
                    <label for="deliveries">Number of Deliveries</label>
                    <input type="number" id="deliveries" min="0" value="0">
                </div>
                <div class="form-group">
                    <label for="returns">Number of Returns</label>
                    <input type="number" id="returns" min="0" value="0">
                </div>
                <div class="form-group">
                    <label for="holds">Number of Holds</label>
                    <input type="number" id="holds" min="0" value="0">
                </div>
                <button id="recordWorkBtn">Record Daily Work</button>
            </div>

            <div class="card">
                <h2>Calculate Salary</h2>
                <div class="form-group">
                    <label for="salaryRiderId">Rider ID</label>
                    <input type="text" id="salaryRiderId" placeholder="Enter rider ID">
                </div>
                <div class="form-group">
                    <label for="salaryMonth">Month</label>
                    <select id="salaryMonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="salaryYear">Year</label>
                    <input type="number" id="salaryYear" min="2020" max="2030" value="2023">
                </div>
                <button id="calculateSalaryBtn">Calculate Salary</button>
            </div>
        </div>

        <div id="alertContainer"></div>

        <div class="card">
            <h2>Rider Information</h2>
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-value" id="totalRiders">0</div>
                    <div class="stat-label">Total Riders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="insideRiders">0</div>
                    <div class="stat-label">Inside Riders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="outsideRiders">0</div>
                    <div class="stat-label">Outside Riders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalRecords">0</div>
                    <div class="stat-label">Work Records</div>
                </div>
            </div>
        </div>

        <div class="history-container">
            <h2>Work History</h2>
            <table id="workHistoryTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Rider ID</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Deliveries</th>
                        <th>Returns</th>
                        <th>Holds</th>
                        <th>Earnings</th>
                    </tr>
                </thead>
                <tbody id="workHistoryBody">
                    <!-- Work history will be populated here -->
                </tbody>
            </table>
        </div>

        <div class="summary-card hidden" id="salarySummary">
            <h2>Salary Summary</h2>
            <div class="summary-row">
                <span>Rider Name:</span>
                <span id="summaryName">-</span>
            </div>
            <div class="summary-row">
                <span>Rider Type:</span>
                <span id="summaryType">-</span>
            </div>
            <div class="summary-row">
                <span>Basic Salary:</span>
                <span id="summaryBasic">-</span>
            </div>
            <div class="summary-row">
                <span>Present Days:</span>
                <span id="summaryDays">-</span>
            </div>
            <div class="summary-row">
                <span>Total Deliveries:</span>
                <span id="summaryDeliveries">-</span>
            </div>
            <div class="summary-row">
                <span>Total Returns:</span>
                <span id="summaryReturns">-</span>
            </div>
            <div class="summary-row">
                <span>Total Holds:</span>
                <span id="summaryHolds">-</span>
            </div>
            <div class="summary-row">
                <span>Commission Earned:</span>
                <span id="summaryCommission">-</span>
            </div>
            <div class="summary-row">
                <span>Total Salary:</span>
                <span id="summaryTotal">-</span>
            </div>
        </div>
    </div>

    <script>
        // Initialize data
        let riders = JSON.parse(localStorage.getItem('riders')) || {};
        let workHistory = JSON.parse(localStorage.getItem('workHistory')) || {};

        // DOM elements
        const addRiderBtn = document.getElementById('addRiderBtn');
        const recordWorkBtn = document.getElementById('recordWorkBtn');
        const calculateSalaryBtn = document.getElementById('calculateSalaryBtn');
        const workHistoryBody = document.getElementById('workHistoryBody');
        const salarySummary = document.getElementById('salarySummary');
        const alertContainer = document.getElementById('alertContainer');

        // Constants
        const INSIDE_RIDER_BASIC = 3000;
        const OUTSIDE_RIDER_BASIC = 5000;
        const INSIDE_RIDER_RATE = 23;
        const OUTSIDE_RIDER_RATE = 30;

        // Event listeners
        addRiderBtn.addEventListener('click', addRider);
        recordWorkBtn.addEventListener('click', recordDailyWork);
        calculateSalaryBtn.addEventListener('click', calculateSalary);

        // Initialize the page
        updateStats();
        displayWorkHistory();

        // Functions
        function showAlert(message, type) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            alertContainer.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        function addRider() {
            const riderId = document.getElementById('riderId').value.trim();
            const riderName = document.getElementById('riderName').value.trim();
            const riderType = document.getElementById('riderType').value;
            
            if (!riderId || !riderName) {
                showAlert('Please fill in all fields', 'error');
                return;
            }
            
            if (riders[riderId]) {
                showAlert('Rider ID already exists', 'error');
                return;
            }
            
            riders[riderId] = {
                name: riderName,
                type: riderType,
                createdDate: new Date().toISOString().split('T')[0]
            };
            
            saveData();
            updateStats();
            showAlert(`Rider ${riderName} added successfully!`, 'success');
            
            // Clear form
            document.getElementById('riderId').value = '';
            document.getElementById('riderName').value = '';
        }

        function recordDailyWork() {
            const riderId = document.getElementById('workRiderId').value.trim();
            const date = document.getElementById('workDate').value;
            const deliveries = parseInt(document.getElementById('deliveries').value);
            const returns = parseInt(document.getElementById('returns').value);
            const holds = parseInt(document.getElementById('holds').value);
            
            if (!riderId || !date) {
                showAlert('Please fill in all fields', 'error');
                return;
            }
            
            if (!riders[riderId]) {
                showAlert('Rider not found. Please add the rider first.', 'error');
                return;
            }
            
            if (isNaN(deliveries) || isNaN(returns) || isNaN(holds)) {
                showAlert('Please enter valid numbers for deliveries, returns, and holds', 'error');
                return;
            }
            
            if (!workHistory[date]) {
                workHistory[date] = {};
            }
            
            workHistory[date][riderId] = {
                deliveries: deliveries,
                returns: returns,
                holds: holds
            };
            
            saveData();
            displayWorkHistory();
            updateStats();
            showAlert('Daily work recorded successfully!', 'success');
            
            // Clear form
            document.getElementById('workRiderId').value = '';
            document.getElementById('deliveries').value = '0';
            document.getElementById('returns').value = '0';
            document.getElementById('holds').value = '0';
        }

        function calculateSalary() {
            const riderId = document.getElementById('salaryRiderId').value.trim();
            const month = parseInt(document.getElementById('salaryMonth').value);
            const year = parseInt(document.getElementById('salaryYear').value);
            
            if (!riderId) {
                showAlert('Please enter a rider ID', 'error');
                return;
            }
            
            if (!riders[riderId]) {
                showAlert('Rider not found', 'error');
                return;
            }
            
            const rider = riders[riderId];
            const monthDays = getDaysInMonth(month, year);
            
            // Calculate basic salary per day
            const basicSalary = rider.type === 'inside' ? INSIDE_RIDER_BASIC : OUTSIDE_RIDER_BASIC;
            const basicPerDay = basicSalary / monthDays;
            
            // Calculate total earnings
            let totalEarnings = 0;
            let presentDays = 0;
            let totalDeliveries = 0;
            let totalReturns = 0;
            let totalHolds = 0;
            
            for (let day = 1; day <= monthDays; day++) {
                const dateStr = `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                
                if (workHistory[dateStr] && workHistory[dateStr][riderId]) {
                    const dailyData = workHistory[dateStr][riderId];
                    const dailyDeliveries = dailyData.deliveries;
                    
                    // Calculate daily earnings
                    const dailyRate = rider.type === 'inside' ? INSIDE_RIDER_RATE : OUTSIDE_RIDER_RATE;
                    const dailyEarnings = dailyDeliveries * dailyRate;
                    
                    totalEarnings += dailyEarnings + basicPerDay;
                    presentDays++;
                    
                    totalDeliveries += dailyDeliveries;
                    totalReturns += dailyData.returns;
                    totalHolds += dailyData.holds;
                }
            }
            
            // Update the summary display
            document.getElementById('summaryName').textContent = rider.name;
            document.getElementById('summaryType').innerHTML = rider.type === 'inside' 
                ? '<span class="rider-type-badge inside-rider">Inside Rider</span>' 
                : '<span class="rider-type-badge outside-rider">Outside Rider</span>';
            document.getElementById('summaryBasic').textContent = `${basicSalary}৳`;
            document.getElementById('summaryDays').textContent = presentDays;
            document.getElementById('summaryDeliveries').textContent = totalDeliveries;
            document.getElementById('summaryReturns').textContent = totalReturns;
            document.getElementById('summaryHolds').textContent = totalHolds;
            document.getElementById('summaryCommission').textContent = `${(totalEarnings - (basicPerDay * presentDays)).toFixed(2)}৳`;
            document.getElementById('summaryTotal').textContent = `${totalEarnings.toFixed(2)}৳`;
            
            salarySummary.classList.remove('hidden');
            showAlert(`Salary calculated for ${rider.name}`, 'success');
        }

        function getDaysInMonth(month, year) {
            return new Date(year, month, 0).getDate();
        }

        function displayWorkHistory() {
            workHistoryBody.innerHTML = '';
            
            // Get all dates and sort them
            const sortedDates = Object.keys(workHistory).sort();
            
            sortedDates.forEach(date => {
                const dateData = workHistory[date];
                const riderIds = Object.keys(dateData);
                
                riderIds.forEach(riderId => {
                    if (riders[riderId]) {
                        const rider = riders[riderId];
                        const dailyData = dateData[riderId];
                        
                        // Calculate daily earnings
                        const dailyRate = rider.type === 'inside' ? INSIDE_RIDER_RATE : OUTSIDE_RIDER_RATE;
                        const dailyEarnings = dailyData.deliveries * dailyRate;
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${date}</td>
                            <td>${riderId}</td>
                            <td>${rider.name}</td>
                            <td>${rider.type === 'inside' 
                                ? '<span class="rider-type-badge inside-rider">Inside</span>' 
                                : '<span class="rider-type-badge outside-rider">Outside</span>'}</td>
                            <td>${dailyData.deliveries}</td>
                            <td>${dailyData.returns}</td>
                            <td>${dailyData.holds}</td>
                            <td>${dailyEarnings}৳</td>
                        `;
                        
                        workHistoryBody.appendChild(row);
                    }
                });
            });
        }

        function updateStats() {
            const riderIds = Object.keys(riders);
            const insideRidersCount = riderIds.filter(id => riders[id].type === 'inside').length;
            const outsideRidersCount = riderIds.filter(id => riders[id].type === 'outside').length;
            
            let totalRecords = 0;
            Object.keys(workHistory).forEach(date => {
                totalRecords += Object.keys(workHistory[date]).length;
            });
            
            document.getElementById('totalRiders').textContent = riderIds.length;
            document.getElementById('insideRiders').textContent = insideRidersCount;
            document.getElementById('outsideRiders').textContent = outsideRidersCount;
            document.getElementById('totalRecords').textContent = totalRecords;
        }

        function saveData() {
            localStorage.setItem('riders', JSON.stringify(riders));
            localStorage.setItem('workHistory', JSON.stringify(workHistory));
        }

        // Set default date to today
        document.getElementById('workDate').valueAsDate = new Date();
    </script>
</body>
</html>